---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.11.3
  creationTimestamp: null
  name: machinedisruptiongates.karpenter.sh
spec:
  group: karpenter.sh
  names:
    categories:
    - karpenter
    kind: MachineDisruptionGate
    listKind: MachineDisruptionGateList
    plural: machinedisruptiongates
    singular: machinedisruptiongate
  scope: Cluster
  versions:
  - name: v1alpha5
    schema:
      openAPIV3Schema:
        description: MachineDisruptionGate is the Schema for the MachineDisruptionGates
          API
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            description: MachineDisruptionGateSpec is the top level field for MachineDisruptionGates.
            properties:
              actions:
                description: Actions are the well-known deprovisioning actions that
                  cannot be executed by Karpenter.
                items:
                  type: string
                type: array
              schedules:
                description: Schedules represent times where disruption is prohibited
                  by Karpenter. Schedules will be parsed in UTC. If the current time
                  is captured by any of the schedules, the Machine Disruption Gate
                  is considered active.
                items:
                  description: Schedule represents the windows in which a Machine
                    Disruption Gate is active.
                  properties:
                    crontab:
                      description: Crontab represents the start of the schedule at
                        each crontab hit. Crontab should be formatted as (Minute |
                        Hour | Day of Month | Month | Day of Week) Crontabs are parsed
                        in UTC.
                      type: string
                    duration:
                      description: Duration represents how long the schedule will
                        be active since the last crontab hit.
                      type: string
                  required:
                  - crontab
                  - duration
                  type: object
                type: array
              selector:
                description: Selector is a label selector for nodes that Karpenter
                  is prohbited from disrupting. Omitting selector will select all
                  Karpenter nodes.
                properties:
                  matchExpressions:
                    description: matchExpressions is a list of label selector requirements.
                      The requirements are ANDed.
                    items:
                      description: A label selector requirement is a selector that
                        contains values, a key, and an operator that relates the key
                        and values.
                      properties:
                        key:
                          description: key is the label key that the selector applies
                            to.
                          type: string
                        operator:
                          description: operator represents a key's relationship to
                            a set of values. Valid operators are In, NotIn, Exists
                            and DoesNotExist.
                          type: string
                        values:
                          description: values is an array of string values. If the
                            operator is In or NotIn, the values array must be non-empty.
                            If the operator is Exists or DoesNotExist, the values
                            array must be empty. This array is replaced during a strategic
                            merge patch.
                          items:
                            type: string
                          type: array
                      required:
                      - key
                      - operator
                      type: object
                    type: array
                  matchLabels:
                    additionalProperties:
                      type: string
                    description: matchLabels is a map of {key,value} pairs. A single
                      {key,value} in the matchLabels map is equivalent to an element
                      of matchExpressions, whose key field is "key", the operator
                      is "In", and the values array contains only "value". The requirements
                      are ANDed.
                    type: object
                type: object
                x-kubernetes-map-type: atomic
            required:
            - actions
            - schedules
            type: object
          status:
            description: MachineDisruptionGateStatus defines the observed state of
              MachineDisruptionGate
            properties:
              conditions:
                description: Conditions contains signals for health and readiness
                items:
                  description: 'Condition defines a readiness condition for a Knative
                    resource. See: https://github.com/kubernetes/community/blob/master/contributors/devel/sig-architecture/api-conventions.md#typical-status-properties'
                  properties:
                    lastTransitionTime:
                      description: LastTransitionTime is the last time the condition
                        transitioned from one status to another. We use VolatileTime
                        in place of metav1.Time to exclude this from creating equality.Semantic
                        differences (all other things held constant).
                      type: string
                    message:
                      description: A human readable message indicating details about
                        the transition.
                      type: string
                    reason:
                      description: The reason for the condition's last transition.
                      type: string
                    severity:
                      description: Severity with which to treat failures of this type
                        of condition. When this is not specified, it defaults to Error.
                      type: string
                    status:
                      description: Status of the condition, one of True, False, Unknown.
                      type: string
                    type:
                      description: Type of condition.
                      type: string
                  required:
                  - status
                  - type
                  type: object
                type: array
              nextActiveTime:
                description: NextActiveTime is the next time the MachineDisruptionGate
                  will be active. Will return the current time if it is currently
                  active.
                format: date-time
                type: string
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
